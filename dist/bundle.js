!function(t){var i={};function e(s){if(i[s])return i[s].exports;var h=i[s]={i:s,l:!1,exports:{}};return t[s].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)e.d(s,h,function(i){return t[i]}.bind(null,h));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var s=function(t){return Math.floor(Math.random()*Math.floor(t))},h=function(t){var i=t.canvas,e=t.x,s=t.y,h=t.width,a=t.height,l=t.color,r=i.getContext("2d");r.fillStyle=l,r.fillRect(e,s,h,a)},a=function(t){var i=t.canvas,e=t.x,s=t.y,h=t.radius,a=t.color,l=i.getContext("2d");l.fillStyle=a,l.beginPath(),l.arc(e,s,h,0,2*Math.PI),l.closePath(),l.fill()},l=function(t,i){var e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}},r=function(t){var i=t.x,e=t.y;return{tileCol:Math.floor(i/20),tileRow:Math.floor(e/20)}};class o{constructor(t,i){this.x=t,this.y=i,this.color="magenta",this.radius=15,this.speedRatio=1.3,this.deleteFlag=!1}updatePosition(t){this.enemyPlayerXDelta=t.x-this.x,this.enemyPlayerYDelta=t.y-this.y;const i=0==this.enemyPlayerXDelta?0:this.enemyPlayerXDelta>0?this.speedRatio:-1*this.speedRatio,e=0==this.enemyPlayerYDelta?0:this.enemyPlayerYDelta>0?this.speedRatio:-1*this.speedRatio;this.x+=i,this.y+=e}tryToKillPlayer(t){Math.abs(this.enemyPlayerXDelta)<t.radius+this.radius&&Math.abs(this.enemyPlayerYDelta)<t.radius+this.radius&&t.die()}draw(t){a({canvas:t,...this})}}class n extends o{constructor(t,i){super(t,i),this.color="blue",this.speedRatio=.8,this.circularMovementRadius=5,this.circularMovementSpeed=10,this.circularMovementAngle=0}updatePosition(t){super.updatePosition(t);let i=this.circularMovementRadius*Math.cos(this.circularMovementAngle*(Math.PI/180)),e=this.circularMovementRadius*Math.sin(this.circularMovementAngle*(Math.PI/180));this.circularMovementAngle+=this.circularMovementSpeed,this.x+=i,this.y+=e}}class d extends o{constructor(t,i){super(t,i),this.color="red",this.speedRatio=1.3,this.circularMovementRadius=8,this.circularMovementSpeed=15,this.circularMovementAngle=0}updatePosition(t){super.updatePosition(t);let i=this.circularMovementRadius*Math.cos(this.circularMovementAngle*(Math.PI/180));this.circularMovementAngle+=this.circularMovementSpeed,this.x+=i}}class y{constructor(t,i,e,s){this.x=t,this.y=i,this.dx=e,this.dy=s,this.color="darkslategray",this.radius=3,this.speed=15,this.deleteFlag=!1}updatePosition(){this.x+=this.dx*this.speed,this.y+=this.dy*this.speed}isOutOfBounds(){return this.x>800||this.x<0||this.y>600||this.y<0}collidedWithEnemy(t){return this.x>t.x-t.radius&&this.x<t.x+t.radius&&this.y>t.y-t.radius&&this.y<t.y+t.radius}draw(t){a({canvas:t,...this})}}class u{constructor(t,i){this.x=t,this.y=i,this.yDelta=0,this.xDelta=0,this.radius=15,this.color="white",this.onGround=!1,this.keyHoldRight=!1,this.keyHoldLeft=!1,this.xDirection=1,this.yDirection=0,this.isDrawing=!1,this.currentTileType=1,this.justToggledTile={tileCol:-1,tileRow:-1},this.bullets=[]}fire(){let t=0===this.yDirection?this.xDirection:0;this.bullets.push(new y(this.x,this.y,t,this.yDirection))}die(){this.yDelta=0,this.xDelta=0,this.x=100,this.y=100,this.onGround=!1}toggleBrick(t,{tileCol:i,tileRow:e}){i===this.justToggledTile.tileCol&&e===this.justToggledTile.tileRow||(0===t[e][i]?t[e][i]=this.currentTileType:t[e][i]=0,this.justToggledTile={tileCol:i,tileRow:e})}_applyGravity(){this.onGround||(this.yDelta+=.6),this.y+=this.yDelta}_detectSurroundings(t){this.playerFeet=r({x:this.x,y:this.y+this.radius}),this.playerRightSide=r({x:this.x+this.radius,y:this.y}),this.playerLeftSide=r({x:this.x-this.radius,y:this.y}),this.playerHead=r({x:this.x,y:this.y-this.radius}),this.playerFeetTile=void 0===t[this.playerFeet.tileRow]?0:t[this.playerFeet.tileRow][this.playerFeet.tileCol],this.playerRightSideTile=void 0===t[this.playerRightSide.tileRow]?0:t[this.playerRightSide.tileRow][this.playerRightSide.tileCol],this.playerLeftSideTile=void 0===t[this.playerLeftSide.tileRow]?0:t[this.playerLeftSide.tileRow][this.playerLeftSide.tileCol],this.playerHeadTile=void 0===t[this.playerHead.tileRow]?0:t[this.playerHead.tileRow][this.playerHead.tileCol],this.tileValuesAroundPlayer=[this.playerFeetTile,this.playerRightSideTile,this.playerLeftSideTile,this.playerHeadTile],this.tilesAroundPlayer=[this.playerFeet,this.playerRightSide,this.playerLeftSide,this.playerHead],this.touchingACoin=this.tileValuesAroundPlayer.indexOf(2)}_detectCollisions(t){if(-1!==this.touchingACoin){const i=this.tilesAroundPlayer[this.touchingACoin];t[i.tileRow][i.tileCol]=0}1===this.playerFeetTile&&this.yDelta>0&&this.y-this.radius<20*this.playerFeet.tileRow?(this.onGround=!0,this.yDelta=0):0===this.playerFeetTile&&(this.onGround=!1),this.keyHoldRight&&this.playerRightSideTile&&(this.x-=3),this.keyHoldLeft&&this.playerLeftSideTile&&(this.x+=3),(this.y>700||this.y<-200)&&this.die(),this.onGround&&this.y+this.radius>20*this.playerFeet.tileRow&&(this.y=20*this.playerFeet.tileRow-this.radius)}_movePlayerLeftRight(){this.keyHoldLeft&&(this.x-=3),this.keyHoldRight&&(this.x+=3)}updatePosition(t){this._applyGravity(),this._detectSurroundings(t),this._detectCollisions(t),this._movePlayerLeftRight()}draw(t){a({canvas:t,...this}),this._drawPlayerEyes(t)}_drawPlayerEyes(t){let i,e={radius:this.radius/5,color:"black"};0===this.yDirection?(e.y=this.y-this.radius/2,-1===this.xDirection?e.x=this.x-this.radius/2:e.x=this.x+this.radius/2,i={...e,x:e.x+2*e.radius*this.xDirection}):-1===this.yDirection?(e.y=this.y-this.radius,e.x=this.x-this.radius/4,i={...e,x:this.x+this.radius/3}):(e.y=this.y-this.radius/4,e.x=this.x-this.radius/4,i={...e,x:this.x+this.radius/3}),a({canvas:t,...e}),a({canvas:t,...i})}addEventListeners(t,i){t.addEventListener("mousedown",t=>{this.isDrawing=!0}),t.addEventListener("mouseup",e=>{this.isDrawing=!1;const s=l(t,e);this.toggleBrick(i,r(s)),this.justToggledTile={tileCol:-1,tileRow:-1}}),t.addEventListener("mousemove",e=>{if(this.isDrawing){const s=l(t,e);this.toggleBrick(i,r(s))}}),document.body.onkeydown=t=>{16==t.keyCode&&this.onGround?this.yDelta=-10:87==t.keyCode?this.yDirection=-1:83==t.keyCode?this.yDirection=1:65==t.keyCode?(this.keyHoldLeft=!0,this.xDirection=-1):68==t.keyCode?(this.keyHoldRight=!0,this.xDirection=1):191==t.keyCode&&this.fire()},document.body.onkeyup=t=>{65==t.keyCode?this.keyHoldLeft=!1:68==t.keyCode?this.keyHoldRight=!1:87!=t.keyCode&&83!=t.keyCode||(this.yDirection=0)}}}class c{constructor(t,i,e){this.enemies=[],this.tilesMatrix=function(){for(var t=[],i=0;i<30;i++){t.push([]);for(var e=0;e<40;e++)29===i?t[i].push(1):t[i].push(0)}return t}(),this.gameCanvas=document.getElementById(t),this.gameCanvas.width=i,this.gameCanvas.height=e,this.player=new u(100,100),this.enemyTypes=[o,d,n],this.newEnemyTypeIndex=0}play(){this._init(),setInterval(()=>this._mainLoop(),1e3/60),setInterval(()=>{const t=this.enemyTypes[this.newEnemyTypeIndex];this.enemies.push(new t(s(this.gameCanvas.width),s(this.gameCanvas.height))),this.newEnemyTypeIndex=++this.newEnemyTypeIndex%this.enemyTypes.length},3e3)}_init(){this.player.addEventListeners(this.gameCanvas,this.tilesMatrix),this._addCoinToTilesMatrix(this.tilesMatrix)}_mainLoop(){this._moveAll(),this._drawAll(this.gameCanvas,this.tilesMatrix)}_moveAll(){this.enemies=this.enemies.filter(t=>!t.deleteFlag),this.player.bullets=this.player.bullets.filter(t=>!t.deleteFlag),this.player.updatePosition(this.tilesMatrix),-1!==this.player.touchingACoin&&this._addCoinToTilesMatrix(this.tilesMatrix),this.enemies.forEach(t=>{t.updatePosition(this.player),t.tryToKillPlayer(this.player)}),this.player.bullets.forEach(t=>{t.updatePosition(),t.isOutOfBounds()&&(t.deleteFlag=!0),this.enemies.forEach(i=>{t.collidedWithEnemy(i)&&(t.deleteFlag=!0,i.deleteFlag=!0)})})}_drawAll(){var t,i;h({canvas:this.gameCanvas,x:0,y:0,height:600,width:800,color:"skyblue"}),t=this.gameCanvas,(i=this.tilesMatrix).forEach((function(e,s){e.forEach((function(e,a){var l=i[s][a],r=20*a,o=20*s;1===l&&h({canvas:t,x:r,y:o,height:19,width:19,color:"darkgreen"}),2===l&&h({canvas:t,x:r,y:o,height:19,width:19,color:"yellow"})}))})),this.player.draw(this.gameCanvas),this.enemies.forEach(t=>t.draw(this.gameCanvas)),this.player.bullets.forEach(t=>t.draw(this.gameCanvas))}_addCoinToTilesMatrix(t){t[s(29)][s(39)]=2}}window.onload=function(){new c("gameCanvas",800,600).play()}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliLnRzIiwid2VicGFjazovLy8uL3NyYy9lbmVteS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYnVsbGV0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZ2V0UmFuZG9tSW50IiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZHJhd1JlY3QiLCJjYW52YXMiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiY29sb3IiLCJjdHgiLCJnZXRDb250ZXh0IiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJkcmF3Q2lyY2xlIiwicmFkaXVzIiwiYmVnaW5QYXRoIiwiYXJjIiwiUEkiLCJjbG9zZVBhdGgiLCJmaWxsIiwiZ2V0TW91c2VQb3MiLCJldnQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwiZ2V0VGlsZUZyb21Qb3MiLCJ0aWxlQ29sIiwiQ0FOVkFTX1dJRFRIIiwidGlsZVJvdyIsIkNBTlZBU19IRUlHSFQiLCJ0aGlzIiwic3BlZWRSYXRpbyIsImRlbGV0ZUZsYWciLCJwbGF5ZXIiLCJlbmVteVBsYXllclhEZWx0YSIsImVuZW15UGxheWVyWURlbHRhIiwiZW5lbXlYRGVsdGEiLCJlbmVteVlEZWx0YSIsImFicyIsImRpZSIsInN1cGVyIiwiY2lyY3VsYXJNb3ZlbWVudFJhZGl1cyIsImNpcmN1bGFyTW92ZW1lbnRTcGVlZCIsImNpcmN1bGFyTW92ZW1lbnRBbmdsZSIsInVwZGF0ZVBvc2l0aW9uIiwiY2lyY2xlWCIsImNvcyIsImNpcmNsZVkiLCJzaW4iLCJkeCIsImR5Iiwic3BlZWQiLCJlbmVteSIsInhQb3MiLCJ5UG9zIiwieURlbHRhIiwieERlbHRhIiwib25Hcm91bmQiLCJrZXlIb2xkUmlnaHQiLCJrZXlIb2xkTGVmdCIsInhEaXJlY3Rpb24iLCJ5RGlyZWN0aW9uIiwiaXNEcmF3aW5nIiwiY3VycmVudFRpbGVUeXBlIiwianVzdFRvZ2dsZWRUaWxlIiwiYnVsbGV0cyIsInB1c2giLCJ0aWxlc01hdHJpeCIsInBsYXllckZlZXQiLCJwbGF5ZXJSaWdodFNpZGUiLCJwbGF5ZXJMZWZ0U2lkZSIsInBsYXllckhlYWQiLCJwbGF5ZXJGZWV0VGlsZSIsInVuZGVmaW5lZCIsInBsYXllclJpZ2h0U2lkZVRpbGUiLCJwbGF5ZXJMZWZ0U2lkZVRpbGUiLCJwbGF5ZXJIZWFkVGlsZSIsInRpbGVWYWx1ZXNBcm91bmRQbGF5ZXIiLCJ0aWxlc0Fyb3VuZFBsYXllciIsInRvdWNoaW5nQUNvaW4iLCJpbmRleE9mIiwidGFyZ2V0VGlsZSIsIl9hcHBseUdyYXZpdHkiLCJfZGV0ZWN0U3Vycm91bmRpbmdzIiwiX2RldGVjdENvbGxpc2lvbnMiLCJfbW92ZVBsYXllckxlZnRSaWdodCIsIl9kcmF3UGxheWVyRXllcyIsInBsYXllckV5ZTIiLCJwbGF5ZXJFeWUxIiwiZ2FtZUNhbnZhcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfIiwibW91c2VQb3MiLCJ0b2dnbGVCcmljayIsImRvY3VtZW50IiwiYm9keSIsIm9ua2V5ZG93biIsImtleUNvZGUiLCJmaXJlIiwib25rZXl1cCIsImNhbnZhc0lkIiwiY2FudmFzV2lkdGgiLCJjYW52YXNIZWlnaHQiLCJlbmVtaWVzIiwiaiIsIk5VTUJFUl9PRl9ST1dTIiwiZ2VuZXJhdGVUaWxlc01hdHJpeCIsImdldEVsZW1lbnRCeUlkIiwiZW5lbXlUeXBlcyIsIm5ld0VuZW15VHlwZUluZGV4IiwiX2luaXQiLCJzZXRJbnRlcnZhbCIsIl9tYWluTG9vcCIsIm5ld0VuZW15VHlwZSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXJzIiwiX2FkZENvaW5Ub1RpbGVzTWF0cml4IiwiX21vdmVBbGwiLCJfZHJhd0FsbCIsImZpbHRlciIsImJ1bGxldCIsImZvckVhY2giLCJ0cnlUb0tpbGxQbGF5ZXIiLCJpc091dE9mQm91bmRzIiwiY29sbGlkZWRXaXRoRW5lbXkiLCJyb3ciLCJyb3dJZHgiLCJjb2x1bW5JZHgiLCJjdXJyZW50VGlsZSIsImN1cnJlbnRUaWxlWCIsImN1cnJlbnRUaWxlWSIsIlRJTEVfSEVJR0hUIiwiVElMRV9XSURUSCIsImRyYXciLCJOVU1CRVJfT0ZfQ09MVU1OUyIsIndpbmRvdyIsIm9ubG9hZCIsInBsYXkiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0Na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QUFxQi9HLEVBQWE0SSxLTGhFbkMsR01mNUJDLE9BQU9DLE9BQVMsV0FDRCxJQUFJLEVBQUssYU5KWSxJQUNDLEtNSTlCQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY29uc3QgQ0FOVkFTX1dJRFRIOiBudW1iZXIgPSA4MDA7XG5leHBvcnQgY29uc3QgQ0FOVkFTX0hFSUdIVDogbnVtYmVyID0gNjAwO1xuZXhwb3J0IGNvbnN0IE5VTUJFUl9PRl9DT0xVTU5TOiBudW1iZXIgPSA0MDtcbmV4cG9ydCBjb25zdCBOVU1CRVJfT0ZfUk9XUzogbnVtYmVyID0gMzA7XG5leHBvcnQgY29uc3QgVElMRV9XSURUSDogbnVtYmVyID0gQ0FOVkFTX1dJRFRIIC8gTlVNQkVSX09GX0NPTFVNTlM7XG5leHBvcnQgY29uc3QgVElMRV9IRUlHSFQ6IG51bWJlciA9IENBTlZBU19IRUlHSFQgLyBOVU1CRVJfT0ZfUk9XUztcbmV4cG9ydCBjb25zdCBGUkFNRVNfUEVSX1NFQ09ORDogbnVtYmVyID0gNjA7XG5leHBvcnQgY29uc3QgR1JBVklUWTogbnVtYmVyID0gMC42O1xuXG5leHBvcnQgY29uc3QgTEVGVDogbnVtYmVyID0gNjU7XG5leHBvcnQgY29uc3QgUklHSFQ6IG51bWJlciA9IDY4O1xuZXhwb3J0IGNvbnN0IFVQOiBudW1iZXIgPSA4NztcbmV4cG9ydCBjb25zdCBET1dOOiBudW1iZXIgPSA4MztcbmV4cG9ydCBjb25zdCBKVU1QOiBudW1iZXIgPSAxNjtcbmV4cG9ydCBjb25zdCBGSVJFOiBudW1iZXIgPSAxOTE7XG5cbmV4cG9ydCBjb25zdCBFTVBUWTogbnVtYmVyID0gMDtcbmV4cG9ydCBjb25zdCBCUklDSzogbnVtYmVyID0gMTtcbmV4cG9ydCBjb25zdCBDT0lOOiBudW1iZXIgPSAyO1xuXG5leHBvcnQgY29uc3QgUExBWUVSX1NQRUVEOiBudW1iZXIgPSAzO1xuZXhwb3J0IGNvbnN0IEVORU1ZX1NQRUVEOiBudW1iZXIgPSAwLjg7XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0NPTE9SOiBzdHJpbmcgPSAnc2t5Ymx1ZSc7XG5leHBvcnQgY29uc3QgUExBWUVSX0NPTE9SOiBzdHJpbmcgPSAnd2hpdGUnO1xuZXhwb3J0IGNvbnN0IEJVTExFVF9DT0xPUjogc3RyaW5nID0gJ2RhcmtzbGF0ZWdyYXknO1xuZXhwb3J0IGNvbnN0IEJBU0lDX0VORU1ZX0NPTE9SOiBzdHJpbmcgPSAnbWFnZW50YSc7XG5leHBvcnQgY29uc3QgV09CQkxZX0VORU1ZX0NPTE9SOiBzdHJpbmcgPSAnYmx1ZSc7XG5leHBvcnQgY29uc3QgWklHX1pBR19FTkVNWV9DT0xPUjogc3RyaW5nID0gJ3JlZCdcbmV4cG9ydCBjb25zdCBDT0lOX0NPTE9SOiBzdHJpbmcgPSAneWVsbG93JztcbmV4cG9ydCBjb25zdCBUSUxFX0NPTE9SOiBzdHJpbmcgPSAnZGFya2dyZWVuJzsiLCJpbXBvcnQge1xuICBOVU1CRVJfT0ZfQ09MVU1OUyxcbiAgTlVNQkVSX09GX1JPV1MsXG4gIFRJTEVfSEVJR0hULFxuICBUSUxFX1dJRFRILFxuICBFTVBUWSxcbiAgQlJJQ0ssXG4gIFRJTEVfQ09MT1IsXG4gIENPSU5fQ09MT1IsXG4gIENPSU5cbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5jb25zdCBnZXRSYW5kb21JbnQgPSAobWF4OiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1hdGguZmxvb3IobWF4KSk7XG59XG5cbmNvbnN0IGRyYXdSZWN0ID0gKHtjYW52YXMsIHgsIHkgLCB3aWR0aCwgaGVpZ2h0LCBjb2xvcn0gOiB7XG4gIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICB3aWR0aDogbnVtYmVyLFxuICBoZWlnaHQ6IG51bWJlcixcbiAgY29sb3I6IHN0cmluZ1xufSkgPT4ge1xuICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yXG4gIGN0eC5maWxsUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbn1cblxuY29uc3QgZHJhd0NpcmNsZSA9ICh7Y2FudmFzLCB4LCB5ICwgcmFkaXVzLCBjb2xvcn0gOiB7XG4gIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICByYWRpdXM6IG51bWJlcixcbiAgY29sb3I6IHN0cmluZ1xufSkgPT4ge1xuICBsZXQgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5hcmMoeCwgeSAsIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuICBjdHguY2xvc2VQYXRoKCk7XG4gIGN0eC5maWxsKCk7XG59XG5cbmNvbnN0IGRyYXdUaWxlcyA9IChnYW1lQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgdGlsZXNNYXRyaXg6IEFycmF5PEFycmF5PG51bWJlcj4+KSA9PiB7XG4gIHRpbGVzTWF0cml4LmZvckVhY2goKHJvdzogQXJyYXk8bnVtYmVyPiwgcm93SWR4OiBudW1iZXIpID0+IHtcbiAgICByb3cuZm9yRWFjaCgoXzogbnVtYmVyLCBjb2x1bW5JZHg6IG51bWJlcikgPT4ge1xuICAgICAgbGV0IGN1cnJlbnRUaWxlID0gdGlsZXNNYXRyaXhbcm93SWR4XVtjb2x1bW5JZHhdXG4gICAgICBsZXQgY3VycmVudFRpbGVYID0gY29sdW1uSWR4ICogVElMRV9XSURUSDtcbiAgICAgIGxldCBjdXJyZW50VGlsZVkgPSByb3dJZHggKiBUSUxFX0hFSUdIVFxuICAgICAgaWYgKGN1cnJlbnRUaWxlID09PSBCUklDSykge1xuICAgICAgICBkcmF3UmVjdCh7Y2FudmFzOiBnYW1lQ2FudmFzLCB4OmN1cnJlbnRUaWxlWCwgeTpjdXJyZW50VGlsZVksIGhlaWdodDogVElMRV9IRUlHSFQgLSAxLCB3aWR0aDogVElMRV9XSURUSCAtIDEsIGNvbG9yOiBUSUxFX0NPTE9SfSlcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50VGlsZSA9PT0gQ09JTikge1xuICAgICAgICBkcmF3UmVjdCh7Y2FudmFzOiBnYW1lQ2FudmFzLCB4OmN1cnJlbnRUaWxlWCwgeTpjdXJyZW50VGlsZVksIGhlaWdodDogVElMRV9IRUlHSFQgLSAxLCB3aWR0aDogVElMRV9XSURUSCAtIDEsIGNvbG9yOiBDT0lOX0NPTE9SfSlcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmNvbnN0IGdldE1vdXNlUG9zID0gKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIGV2dDogTW91c2VFdmVudCkgPT4ge1xuICBsZXQgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICB4OiBldnQuY2xpZW50WCAtIHJlY3QubGVmdCxcbiAgICB5OiBldnQuY2xpZW50WSAtIHJlY3QudG9wXG4gIH07XG59XG5cbmNvbnN0IGdldFRpbGVGcm9tUG9zID0gKHsgeCwgeSB9OiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9KSA9PiB7XG4gIGNvbnN0IHRpbGVDb2wgPSBNYXRoLmZsb29yKHggLyBUSUxFX1dJRFRIKTtcbiAgY29uc3QgdGlsZVJvdyA9IE1hdGguZmxvb3IoeSAvIFRJTEVfSEVJR0hUKTtcbiAgcmV0dXJuIHsgdGlsZUNvbCwgdGlsZVJvdyB9XG59XG5cbmNvbnN0IGdlbmVyYXRlVGlsZXNNYXRyaXggPSAoKTogQXJyYXk8QXJyYXk8bnVtYmVyPj4gPT4ge1xuICBjb25zdCB0aWxlc01hdHJpeCA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IE5VTUJFUl9PRl9ST1dTOyBpICsrKSB7XG4gICAgdGlsZXNNYXRyaXgucHVzaChbXSlcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IE5VTUJFUl9PRl9DT0xVTU5TOyBqICsrKSB7XG4gICAgICBpZiAoaSA9PT0gTlVNQkVSX09GX1JPV1MgLSAxKSB7XG4gICAgICAgIHRpbGVzTWF0cml4W2ldLnB1c2goQlJJQ0spXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aWxlc01hdHJpeFtpXS5wdXNoKEVNUFRZKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdGlsZXNNYXRyaXg7XG59XG5cblxuZXhwb3J0IHtcbiAgZ2V0UmFuZG9tSW50LFxuICBkcmF3UmVjdCxcbiAgZHJhd0NpcmNsZSxcbiAgZHJhd1RpbGVzLFxuICBnZXRNb3VzZVBvcyxcbiAgZ2V0VGlsZUZyb21Qb3MsXG4gIGdlbmVyYXRlVGlsZXNNYXRyaXgsXG59IiwiaW1wb3J0IHsgQkFTSUNfRU5FTVlfQ09MT1IsIFdPQkJMWV9FTkVNWV9DT0xPUiwgWklHX1pBR19FTkVNWV9DT0xPUiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGRyYXdDaXJjbGUgfSBmcm9tICcuL2xpYidcblxuY2xhc3MgRW5lbXkge1xuICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuY29sb3IgPSBCQVNJQ19FTkVNWV9DT0xPUjtcbiAgICB0aGlzLnJhZGl1cyA9IDE1O1xuICAgIHRoaXMuc3BlZWRSYXRpbyA9IDEuMztcbiAgICB0aGlzLmRlbGV0ZUZsYWcgPSBmYWxzZTtcbiAgfVxuXG4gIHVwZGF0ZVBvc2l0aW9uKHBsYXllcikge1xuICAgIHRoaXMuZW5lbXlQbGF5ZXJYRGVsdGEgPSBwbGF5ZXIueCAtIHRoaXMueDtcbiAgICB0aGlzLmVuZW15UGxheWVyWURlbHRhID0gcGxheWVyLnkgLSB0aGlzLnk7XG4gICAgXG4gICAgY29uc3QgZW5lbXlYRGVsdGEgPSB0aGlzLmVuZW15UGxheWVyWERlbHRhID09IDAgPyAwIDogdGhpcy5lbmVteVBsYXllclhEZWx0YSA+IDAgPyB0aGlzLnNwZWVkUmF0aW8gOiB0aGlzLnNwZWVkUmF0aW8gKiAtMTtcbiAgICBjb25zdCBlbmVteVlEZWx0YSA9IHRoaXMuZW5lbXlQbGF5ZXJZRGVsdGEgPT0gMCA/IDAgOiB0aGlzLmVuZW15UGxheWVyWURlbHRhID4gMCA/IHRoaXMuc3BlZWRSYXRpbyA6IHRoaXMuc3BlZWRSYXRpbyAqIC0xO1xuXG4gICAgdGhpcy54ICs9IGVuZW15WERlbHRhO1xuICAgIHRoaXMueSArPSBlbmVteVlEZWx0YTtcbiAgfVxuXG4gIHRyeVRvS2lsbFBsYXllcihwbGF5ZXIpIHtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5lbmVteVBsYXllclhEZWx0YSkgPCBwbGF5ZXIucmFkaXVzICsgdGhpcy5yYWRpdXMgJiYgTWF0aC5hYnModGhpcy5lbmVteVBsYXllcllEZWx0YSkgPCBwbGF5ZXIucmFkaXVzICsgdGhpcy5yYWRpdXMpIHtcbiAgICAgIHBsYXllci5kaWUoKTtcbiAgICB9XG4gIH1cblxuICBkcmF3KGNhbnZhcykge1xuICAgIGRyYXdDaXJjbGUoeyBjYW52YXMsIC4uLnRoaXMgfSk7XG4gIH1cbn1cblxuY2xhc3MgV29iYmx5RW5lbXkgZXh0ZW5kcyBFbmVteSB7XG5cbiAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgIHN1cGVyKHgsIHkpO1xuICAgIHRoaXMuY29sb3IgPSBXT0JCTFlfRU5FTVlfQ09MT1I7XG4gICAgdGhpcy5zcGVlZFJhdGlvID0gMC44O1xuICAgIHRoaXMuY2lyY3VsYXJNb3ZlbWVudFJhZGl1cyA9IDU7XG4gICAgdGhpcy5jaXJjdWxhck1vdmVtZW50U3BlZWQgPSAxMDtcbiAgICB0aGlzLmNpcmN1bGFyTW92ZW1lbnRBbmdsZSA9IDA7XG4gIH1cblxuICB1cGRhdGVQb3NpdGlvbihwbGF5ZXIpIHtcblxuICAgIHN1cGVyLnVwZGF0ZVBvc2l0aW9uKHBsYXllcik7XG4gICAgXG4gICAgbGV0IGNpcmNsZVggID0gdGhpcy5jaXJjdWxhck1vdmVtZW50UmFkaXVzICogTWF0aC5jb3ModGhpcy5jaXJjdWxhck1vdmVtZW50QW5nbGUgKiAoTWF0aC5QSS8xODApKTtcbiAgICBsZXQgY2lyY2xlWSA9IHRoaXMuY2lyY3VsYXJNb3ZlbWVudFJhZGl1cyAqIE1hdGguc2luKHRoaXMuY2lyY3VsYXJNb3ZlbWVudEFuZ2xlICogKE1hdGguUEkvMTgwKSk7XG5cbiAgICB0aGlzLmNpcmN1bGFyTW92ZW1lbnRBbmdsZSArPSB0aGlzLmNpcmN1bGFyTW92ZW1lbnRTcGVlZDtcbiAgICB0aGlzLnggKz0gY2lyY2xlWDtcbiAgICB0aGlzLnkgKz0gY2lyY2xlWTtcbiAgfVxuXG59XG5cbmNsYXNzIFppZ1phZ0VuZW15IGV4dGVuZHMgRW5lbXkge1xuXG4gIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICBzdXBlcih4LCB5KTtcbiAgICB0aGlzLmNvbG9yID0gWklHX1pBR19FTkVNWV9DT0xPUjtcbiAgICB0aGlzLnNwZWVkUmF0aW8gPSAxLjM7XG4gICAgdGhpcy5jaXJjdWxhck1vdmVtZW50UmFkaXVzID0gODtcbiAgICB0aGlzLmNpcmN1bGFyTW92ZW1lbnRTcGVlZCA9IDE1O1xuICAgIHRoaXMuY2lyY3VsYXJNb3ZlbWVudEFuZ2xlID0gMDtcbiAgfVxuXG4gIHVwZGF0ZVBvc2l0aW9uKHBsYXllcikge1xuXG4gICAgc3VwZXIudXBkYXRlUG9zaXRpb24ocGxheWVyKTtcbiAgICBcbiAgICBsZXQgY2lyY2xlWCAgPSB0aGlzLmNpcmN1bGFyTW92ZW1lbnRSYWRpdXMgKiBNYXRoLmNvcyh0aGlzLmNpcmN1bGFyTW92ZW1lbnRBbmdsZSAqIChNYXRoLlBJLzE4MCkpO1xuXG4gICAgdGhpcy5jaXJjdWxhck1vdmVtZW50QW5nbGUgKz0gdGhpcy5jaXJjdWxhck1vdmVtZW50U3BlZWQ7XG4gICAgdGhpcy54ICs9IGNpcmNsZVg7XG4gIH1cblxufVxuXG5leHBvcnQgeyBFbmVteSwgV29iYmx5RW5lbXksIFppZ1phZ0VuZW15IH07IiwiaW1wb3J0IHsgQ0FOVkFTX0hFSUdIVCwgQ0FOVkFTX1dJRFRILCBCVUxMRVRfQ09MT1IgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBkcmF3Q2lyY2xlIH0gZnJvbSAnLi9saWInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXQge1xuICBjb25zdHJ1Y3Rvcih4LCB5LCBkeCwgZHkpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5keCA9IGR4O1xuICAgIHRoaXMuZHkgPSBkeTtcbiAgICB0aGlzLmNvbG9yID0gQlVMTEVUX0NPTE9SO1xuICAgIHRoaXMucmFkaXVzID0gMztcbiAgICB0aGlzLnNwZWVkID0gMTU7XG4gICAgdGhpcy5kZWxldGVGbGFnID0gZmFsc2U7XG4gIH1cblxuICB1cGRhdGVQb3NpdGlvbigpIHtcbiAgICB0aGlzLnggKz0gdGhpcy5keCAqIHRoaXMuc3BlZWQ7XG4gICAgdGhpcy55ICs9IHRoaXMuZHkgKiB0aGlzLnNwZWVkO1xuICB9XG5cbiAgaXNPdXRPZkJvdW5kcygpIHtcbiAgICByZXR1cm4gdGhpcy54ID4gQ0FOVkFTX1dJRFRIIHx8IHRoaXMueCA8IDAgfHwgdGhpcy55ID4gQ0FOVkFTX0hFSUdIVCB8fCB0aGlzLnkgPCAwO1xuICB9XG5cbiAgY29sbGlkZWRXaXRoRW5lbXkoZW5lbXkpIHtcbiAgICByZXR1cm4gdGhpcy54ID4gZW5lbXkueCAtIGVuZW15LnJhZGl1cyAmJiB0aGlzLnggPCBlbmVteS54ICsgZW5lbXkucmFkaXVzICYmIHRoaXMueSA+IGVuZW15LnkgLSBlbmVteS5yYWRpdXMgJiYgdGhpcy55IDwgZW5lbXkueSArIGVuZW15LnJhZGl1cztcbiAgfVxuXG4gIGRyYXcoY2FudmFzKSB7XG4gICAgZHJhd0NpcmNsZSh7IGNhbnZhcywgLi4udGhpcyB9KTtcbiAgfVxufSIsImltcG9ydCB7XG4gIFBMQVlFUl9DT0xPUixcbiAgUExBWUVSX1NQRUVELFxuICBCUklDSyxcbiAgRU1QVFksXG4gIEdSQVZJVFksXG4gIENPSU4sXG4gIENBTlZBU19IRUlHSFQsXG4gIExFRlQsXG4gIFJJR0hULFxuICBVUCxcbiAgRE9XTixcbiAgRklSRSxcbiAgSlVNUCxcbiAgVElMRV9IRUlHSFRcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5pbXBvcnQgQnVsbGV0IGZyb20gJy4vYnVsbGV0J1xuaW1wb3J0IHsgZHJhd0NpcmNsZSwgZ2V0TW91c2VQb3MsIGdldFRpbGVGcm9tUG9zIH0gZnJvbSAnLi9saWInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XG4gIGNvbnN0cnVjdG9yKHhQb3MsIHlQb3MpIHtcbiAgICB0aGlzLnggPSB4UG9zO1xuICAgIHRoaXMueSA9IHlQb3M7XG4gICAgdGhpcy55RGVsdGEgPSAwO1xuICAgIHRoaXMueERlbHRhID0gMDtcbiAgICB0aGlzLnJhZGl1cyA9IDE1O1xuICAgIHRoaXMuY29sb3IgPSBQTEFZRVJfQ09MT1I7XG4gICAgdGhpcy5vbkdyb3VuZCA9IGZhbHNlO1xuICAgIHRoaXMua2V5SG9sZFJpZ2h0ID0gZmFsc2U7XG4gICAgdGhpcy5rZXlIb2xkTGVmdCA9IGZhbHNlO1xuICAgIHRoaXMueERpcmVjdGlvbiA9IDE7XG4gICAgdGhpcy55RGlyZWN0aW9uID0gMDtcbiAgICB0aGlzLmlzRHJhd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudFRpbGVUeXBlID0gQlJJQ0s7XG4gICAgdGhpcy5qdXN0VG9nZ2xlZFRpbGUgPSB7IHRpbGVDb2w6IC0xLCB0aWxlUm93OiAtMSB9O1xuICAgIHRoaXMuYnVsbGV0cyA9IFtdO1xuICB9XG4gIGZpcmUoKSB7XG4gICAgbGV0IHhEaXJlY3Rpb24gPSB0aGlzLnlEaXJlY3Rpb24gPT09IDAgPyB0aGlzLnhEaXJlY3Rpb24gOiAwO1xuICAgIHRoaXMuYnVsbGV0cy5wdXNoKG5ldyBCdWxsZXQodGhpcy54LCB0aGlzLnksIHhEaXJlY3Rpb24sIHRoaXMueURpcmVjdGlvbikpO1xuICB9XG4gIGRpZSgpIHtcbiAgICB0aGlzLnlEZWx0YSA9IDA7XG4gICAgdGhpcy54RGVsdGEgPSAwO1xuICAgIHRoaXMueCA9IDEwMDtcbiAgICB0aGlzLnkgPSAxMDA7XG4gICAgdGhpcy5vbkdyb3VuZCA9IGZhbHNlO1xuICB9XG4gIHRvZ2dsZUJyaWNrKCB0aWxlc01hdHJpeCwgeyB0aWxlQ29sLCB0aWxlUm93IH0gKXtcbiAgICBpZiAodGlsZUNvbCAhPT0gdGhpcy5qdXN0VG9nZ2xlZFRpbGUudGlsZUNvbCB8fCB0aWxlUm93ICE9PSB0aGlzLmp1c3RUb2dnbGVkVGlsZS50aWxlUm93KSAge1xuICAgICAgdGlsZXNNYXRyaXhbdGlsZVJvd11bdGlsZUNvbF0gPT09IEVNUFRZID8gdGlsZXNNYXRyaXhbdGlsZVJvd11bdGlsZUNvbF0gPSB0aGlzLmN1cnJlbnRUaWxlVHlwZSA6IHRpbGVzTWF0cml4W3RpbGVSb3ddW3RpbGVDb2xdID0gMDtcbiAgICAgIHRoaXMuanVzdFRvZ2dsZWRUaWxlID0geyB0aWxlQ29sLCB0aWxlUm93IH07XG4gICAgfVxuICB9XG4gIF9hcHBseUdyYXZpdHkoKSB7XG4gICAgaWYgKCF0aGlzLm9uR3JvdW5kKSB7XG4gICAgICB0aGlzLnlEZWx0YSArPSBHUkFWSVRZO1xuICAgIH1cbiAgICB0aGlzLnkgKz0gdGhpcy55RGVsdGE7XG4gIH1cbiAgX2RldGVjdFN1cnJvdW5kaW5ncyh0aWxlc01hdHJpeCkge1xuICAgIHRoaXMucGxheWVyRmVldCA9IGdldFRpbGVGcm9tUG9zKHt4OiB0aGlzLngsIHk6IHRoaXMueSArIHRoaXMucmFkaXVzfSk7XG4gICAgdGhpcy5wbGF5ZXJSaWdodFNpZGUgPSBnZXRUaWxlRnJvbVBvcyh7eDogdGhpcy54ICsgdGhpcy5yYWRpdXMsIHk6IHRoaXMueX0pO1xuICAgIHRoaXMucGxheWVyTGVmdFNpZGUgPSBnZXRUaWxlRnJvbVBvcyh7eDogdGhpcy54IC0gdGhpcy5yYWRpdXMsIHk6IHRoaXMueX0pO1xuICAgIHRoaXMucGxheWVySGVhZCA9IGdldFRpbGVGcm9tUG9zKHt4OiB0aGlzLngsIHk6IHRoaXMueSAtIHRoaXMucmFkaXVzfSk7XG5cbiAgICB0aGlzLnBsYXllckZlZXRUaWxlID0gdGlsZXNNYXRyaXhbdGhpcy5wbGF5ZXJGZWV0LnRpbGVSb3ddID09PSB1bmRlZmluZWQgPyAwIDogdGlsZXNNYXRyaXhbdGhpcy5wbGF5ZXJGZWV0LnRpbGVSb3ddW3RoaXMucGxheWVyRmVldC50aWxlQ29sXTtcbiAgICB0aGlzLnBsYXllclJpZ2h0U2lkZVRpbGUgPSB0aWxlc01hdHJpeFt0aGlzLnBsYXllclJpZ2h0U2lkZS50aWxlUm93XSA9PT0gdW5kZWZpbmVkID8gMCA6IHRpbGVzTWF0cml4W3RoaXMucGxheWVyUmlnaHRTaWRlLnRpbGVSb3ddW3RoaXMucGxheWVyUmlnaHRTaWRlLnRpbGVDb2xdO1xuICAgIHRoaXMucGxheWVyTGVmdFNpZGVUaWxlID0gdGlsZXNNYXRyaXhbdGhpcy5wbGF5ZXJMZWZ0U2lkZS50aWxlUm93XSA9PT0gdW5kZWZpbmVkID8gMCA6IHRpbGVzTWF0cml4W3RoaXMucGxheWVyTGVmdFNpZGUudGlsZVJvd11bdGhpcy5wbGF5ZXJMZWZ0U2lkZS50aWxlQ29sXTtcbiAgICB0aGlzLnBsYXllckhlYWRUaWxlID0gdGlsZXNNYXRyaXhbdGhpcy5wbGF5ZXJIZWFkLnRpbGVSb3ddID09PSB1bmRlZmluZWQgPyAwIDogdGlsZXNNYXRyaXhbdGhpcy5wbGF5ZXJIZWFkLnRpbGVSb3ddW3RoaXMucGxheWVySGVhZC50aWxlQ29sXTtcblxuICAgIHRoaXMudGlsZVZhbHVlc0Fyb3VuZFBsYXllciA9IFt0aGlzLnBsYXllckZlZXRUaWxlLCB0aGlzLnBsYXllclJpZ2h0U2lkZVRpbGUsIHRoaXMucGxheWVyTGVmdFNpZGVUaWxlLCB0aGlzLnBsYXllckhlYWRUaWxlXTtcbiAgICB0aGlzLnRpbGVzQXJvdW5kUGxheWVyID0gW3RoaXMucGxheWVyRmVldCwgdGhpcy5wbGF5ZXJSaWdodFNpZGUsIHRoaXMucGxheWVyTGVmdFNpZGUsIHRoaXMucGxheWVySGVhZF07XG4gICAgdGhpcy50b3VjaGluZ0FDb2luID0gdGhpcy50aWxlVmFsdWVzQXJvdW5kUGxheWVyLmluZGV4T2YoQ09JTik7XG4gIH1cblxuICBfZGV0ZWN0Q29sbGlzaW9ucyh0aWxlc01hdHJpeCkge1xuICAgIGlmICh0aGlzLnRvdWNoaW5nQUNvaW4gIT09IC0xKSB7XG4gICAgICBjb25zdCB0YXJnZXRUaWxlID0gdGhpcy50aWxlc0Fyb3VuZFBsYXllclt0aGlzLnRvdWNoaW5nQUNvaW5dXG4gICAgICB0aWxlc01hdHJpeFt0YXJnZXRUaWxlLnRpbGVSb3ddW3RhcmdldFRpbGUudGlsZUNvbF0gPSBFTVBUWTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMucGxheWVyRmVldFRpbGUgPT09IEJSSUNLICYmIHRoaXMueURlbHRhID4gMCAmJiB0aGlzLnkgLSB0aGlzLnJhZGl1cyA8IHRoaXMucGxheWVyRmVldC50aWxlUm93ICogVElMRV9IRUlHSFQpIHsgLy8gUGxheWVyIGlzIGZhbGxpbmcgYW5kIGxhbmRzIG9uIHRpbGVcbiAgICAgIHRoaXMub25Hcm91bmQgPSB0cnVlO1xuICAgICAgdGhpcy55RGVsdGEgPSAwO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wbGF5ZXJGZWV0VGlsZSA9PT0gRU1QVFkpIHtcbiAgICAgIHRoaXMub25Hcm91bmQgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIHBheWVyIGlzIG1vdmluZyByaWdodCwgYW5kIHRoZXkgaGl0IGEgYmxvY2ssIHN0b3AgdGhlbSBmcm9tIG1vdmluZyByaWdodFxuICAgIGlmICh0aGlzLmtleUhvbGRSaWdodCAmJiB0aGlzLnBsYXllclJpZ2h0U2lkZVRpbGUpIHtcbiAgICAgIHRoaXMueCAtPSAzO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgcGF5ZXIgaXMgbW92aW5nIGxlZnQsIGFuZCB0aGV5IGhpdCBhIGJsb2NrLCBzdG9wIHRoZW0gZnJvbSBtb3ZpbmcgcmlnaHRcbiAgICBpZiAodGhpcy5rZXlIb2xkTGVmdCAmJiB0aGlzLnBsYXllckxlZnRTaWRlVGlsZSkge1xuICAgICAgdGhpcy54ICs9IDM7XG4gICAgfVxuICBcbiAgICAvLyBSZXNldCBwbGF5ZXIgaWYgdGhleSBmYWxsXG4gICAgaWYgKHRoaXMueSA+IENBTlZBU19IRUlHSFQgKyAxMDAgfHwgdGhpcy55IDwgLTIwMCkge1xuICAgICAgdGhpcy5kaWUoKSBcbiAgICB9XG4gIFxuICAgIC8vIFRvIHByZXZlbnQgYSBwbGF5ZXIgZnJvbSBzaW5raW5nIGludG8gdGhlIGdyb3VuZFxuICAgIGlmICh0aGlzLm9uR3JvdW5kICYmIHRoaXMueSArIHRoaXMucmFkaXVzID4gKHRoaXMucGxheWVyRmVldC50aWxlUm93ICogVElMRV9IRUlHSFQpKSB7XG4gICAgICB0aGlzLnkgPSB0aGlzLnBsYXllckZlZXQudGlsZVJvdyAqIFRJTEVfSEVJR0hUIC0gdGhpcy5yYWRpdXM7XG4gICAgfVxuICB9XG5cbiAgX21vdmVQbGF5ZXJMZWZ0UmlnaHQoKSB7XG4gICAgaWYgKHRoaXMua2V5SG9sZExlZnQpIHtcbiAgICAgIHRoaXMueCAtPSBQTEFZRVJfU1BFRURcbiAgICB9XG4gICAgaWYgKHRoaXMua2V5SG9sZFJpZ2h0KSB7XG4gICAgICB0aGlzLnggKz0gUExBWUVSX1NQRUVEXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUG9zaXRpb24odGlsZXNNYXRyaXgpIHtcbiAgICB0aGlzLl9hcHBseUdyYXZpdHkoKTtcbiAgICB0aGlzLl9kZXRlY3RTdXJyb3VuZGluZ3ModGlsZXNNYXRyaXgpO1xuICAgIHRoaXMuX2RldGVjdENvbGxpc2lvbnModGlsZXNNYXRyaXgpO1xuICAgIHRoaXMuX21vdmVQbGF5ZXJMZWZ0UmlnaHQoKTtcbiAgfVxuXG4gIGRyYXcoY2FudmFzKSB7XG4gICAgZHJhd0NpcmNsZSh7IGNhbnZhcywgLi4udGhpcyB9KTtcbiAgICB0aGlzLl9kcmF3UGxheWVyRXllcyhjYW52YXMpO1xuICB9XG5cbiAgX2RyYXdQbGF5ZXJFeWVzKGNhbnZhcykge1xuICAgIGxldCBwbGF5ZXJFeWUxID0geyByYWRpdXM6IHRoaXMucmFkaXVzIC8gNSwgY29sb3I6ICdibGFjaycgfTtcbiAgICBsZXQgcGxheWVyRXllMjtcbiAgICBcbiAgICBpZiAodGhpcy55RGlyZWN0aW9uID09PSAwICkgeyAvLyBsZWZ0IG9yIHJpZ2h0XG4gICAgICBwbGF5ZXJFeWUxLnkgPSB0aGlzLnkgLSB0aGlzLnJhZGl1cyAvIDI7XG4gICAgICBpZiAodGhpcy54RGlyZWN0aW9uID09PSAtMSApIHsgLy8gbGVmdFxuICAgICAgICBwbGF5ZXJFeWUxLnggPSB0aGlzLnggLSB0aGlzLnJhZGl1cyAvIDI7XG4gICAgICB9IGVsc2UgeyAvLyByaWdodFxuICAgICAgICBwbGF5ZXJFeWUxLnggPSB0aGlzLnggKyB0aGlzLnJhZGl1cyAvIDI7XG4gICAgICB9XG4gICAgICBwbGF5ZXJFeWUyID0gey4uLnBsYXllckV5ZTEsIHg6IHBsYXllckV5ZTEueCArIHBsYXllckV5ZTEucmFkaXVzICogMiAqIHRoaXMueERpcmVjdGlvbn1cbiAgICB9IGVsc2UgaWYgKHRoaXMueURpcmVjdGlvbiA9PT0gLTEpIHsgLy8gdXBcbiAgICAgIHBsYXllckV5ZTEueSA9IHRoaXMueSAtIHRoaXMucmFkaXVzO1xuICAgICAgcGxheWVyRXllMS54ID0gdGhpcy54IC0gdGhpcy5yYWRpdXMgLyA0O1xuICAgICAgcGxheWVyRXllMiA9IHsgLi4ucGxheWVyRXllMSwgeDogdGhpcy54ICsgdGhpcy5yYWRpdXMgLyAzfSA7XG4gICAgfSBlbHNlIHsgLy8gZG93blxuICAgICAgcGxheWVyRXllMS55ID0gdGhpcy55IC0gdGhpcy5yYWRpdXMgLyA0O1xuICAgICAgcGxheWVyRXllMS54ID0gdGhpcy54IC0gdGhpcy5yYWRpdXMgLyA0O1xuICAgICAgcGxheWVyRXllMiA9IHsgLi4ucGxheWVyRXllMSwgeDogdGhpcy54ICsgdGhpcy5yYWRpdXMgLyAzfSA7XG4gICAgfVxuICAgIGRyYXdDaXJjbGUoeyBjYW52YXMsIC4uLnBsYXllckV5ZTEgfSlcbiAgICBkcmF3Q2lyY2xlKHsgY2FudmFzLCAuLi5wbGF5ZXJFeWUyIH0pXG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycyhnYW1lQ2FudmFzLCB0aWxlc01hdHJpeCkge1xuICAgIGdhbWVDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgXyA9PiB7XG4gICAgICB0aGlzLmlzRHJhd2luZyA9IHRydWU7XG4gICAgfSk7XG5cbiAgICBnYW1lQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBldnQgPT4ge1xuICAgICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG1vdXNlUG9zID0gZ2V0TW91c2VQb3MoZ2FtZUNhbnZhcywgZXZ0KTtcbiAgICAgIHRoaXMudG9nZ2xlQnJpY2sodGlsZXNNYXRyaXgsIGdldFRpbGVGcm9tUG9zKG1vdXNlUG9zKSlcbiAgICAgIHRoaXMuanVzdFRvZ2dsZWRUaWxlID0geyB0aWxlQ29sOiAtMSwgdGlsZVJvdzogLTEgfTtcbiAgICB9KTtcblxuICAgIGdhbWVDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZ0ID0+IHtcbiAgICAgIGlmICh0aGlzLmlzRHJhd2luZykge1xuICAgICAgICBjb25zdCBtb3VzZVBvcyA9IGdldE1vdXNlUG9zKGdhbWVDYW52YXMsIGV2dCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnJpY2sodGlsZXNNYXRyaXgsIGdldFRpbGVGcm9tUG9zKG1vdXNlUG9zKSlcbiAgICAgIH0gXG4gICAgfSk7XG4gIFxuICAgIGRvY3VtZW50LmJvZHkub25rZXlkb3duID0gZXZ0ID0+IHtcbiAgICAgIGlmIChldnQua2V5Q29kZSA9PSBKVU1QICYmIHRoaXMub25Hcm91bmQpIHtcbiAgICAgICAgdGhpcy55RGVsdGEgPSAtMTA7XG4gICAgICB9IGVsc2UgaWYgKGV2dC5rZXlDb2RlID09IFVQKSB7XG4gICAgICAgIHRoaXMueURpcmVjdGlvbiA9IC0xO1xuICAgICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PSBET1dOKSB7XG4gICAgICAgIHRoaXMueURpcmVjdGlvbiA9IDE7XG4gICAgICB9IGVsc2UgaWYgKGV2dC5rZXlDb2RlID09IExFRlQpIHtcbiAgICAgICAgdGhpcy5rZXlIb2xkTGVmdCA9IHRydWU7XG4gICAgICAgIHRoaXMueERpcmVjdGlvbiA9IC0xO1xuICAgICAgfSBlbHNlIGlmIChldnQua2V5Q29kZSA9PSBSSUdIVCkge1xuICAgICAgICB0aGlzLmtleUhvbGRSaWdodCA9IHRydWU7XG4gICAgICAgIHRoaXMueERpcmVjdGlvbiA9IDE7XG4gICAgICB9IGVsc2UgaWYgKGV2dC5rZXlDb2RlID09IEZJUkUpIHtcbiAgICAgICAgdGhpcy5maXJlKCk7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICBkb2N1bWVudC5ib2R5Lm9ua2V5dXAgPSAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LmtleUNvZGUgPT0gTEVGVCkge1xuICAgICAgICB0aGlzLmtleUhvbGRMZWZ0ID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGV2dC5rZXlDb2RlID09IFJJR0hUKSB7XG4gICAgICAgIHRoaXMua2V5SG9sZFJpZ2h0ID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKGV2dC5rZXlDb2RlID09IFVQIHx8IGV2dC5rZXlDb2RlID09IERPV04pIHtcbiAgICAgICAgdGhpcy55RGlyZWN0aW9uID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQge1xuICBGUkFNRVNfUEVSX1NFQ09ORCxcbiAgQ0FOVkFTX0hFSUdIVCxcbiAgQ0FOVkFTX1dJRFRILFxuICBCQUNLR1JPVU5EX0NPTE9SLFxuICBOVU1CRVJfT0ZfQ09MVU1OUyxcbiAgTlVNQkVSX09GX1JPV1MsXG4gIENPSU5cbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZHJhd1JlY3QsIGRyYXdUaWxlcywgZ2V0UmFuZG9tSW50LCBnZW5lcmF0ZVRpbGVzTWF0cml4IH0gZnJvbSAnLi9saWInO1xuaW1wb3J0IHsgRW5lbXksIFdvYmJseUVuZW15LCBaaWdaYWdFbmVteSB9IGZyb20gJy4vZW5lbXknO1xuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWUge1xuICBjb25zdHJ1Y3RvcihjYW52YXNJZCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCkge1xuICAgIHRoaXMuZW5lbWllcyA9IFtdO1xuICAgIHRoaXMudGlsZXNNYXRyaXggPSBnZW5lcmF0ZVRpbGVzTWF0cml4KCk7XG4gICAgdGhpcy5nYW1lQ2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzSWQpO1xuICAgIHRoaXMuZ2FtZUNhbnZhcy53aWR0aCA9IGNhbnZhc1dpZHRoO1xuICAgIHRoaXMuZ2FtZUNhbnZhcy5oZWlnaHQgPSBjYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyKDEwMCwgMTAwKTtcbiAgICB0aGlzLmVuZW15VHlwZXMgPSBbIEVuZW15LCBaaWdaYWdFbmVteSwgV29iYmx5RW5lbXkgXTtcbiAgICB0aGlzLm5ld0VuZW15VHlwZUluZGV4ID0gMDtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgdGhpcy5faW5pdCgpO1xuICAgIHNldEludGVydmFsKCgpID0+IHRoaXMuX21haW5Mb29wKCksIDEwMDAvRlJBTUVTX1BFUl9TRUNPTkQpO1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0VuZW15VHlwZSA9IHRoaXMuZW5lbXlUeXBlc1t0aGlzLm5ld0VuZW15VHlwZUluZGV4XTtcbiAgICAgIHRoaXMuZW5lbWllcy5wdXNoKG5ldyBuZXdFbmVteVR5cGUoZ2V0UmFuZG9tSW50KHRoaXMuZ2FtZUNhbnZhcy53aWR0aCksIGdldFJhbmRvbUludCh0aGlzLmdhbWVDYW52YXMuaGVpZ2h0KSkpO1xuICAgICAgdGhpcy5uZXdFbmVteVR5cGVJbmRleCA9ICsrdGhpcy5uZXdFbmVteVR5cGVJbmRleCAlIHRoaXMuZW5lbXlUeXBlcy5sZW5ndGg7XG4gICAgfSwgMzAwMCk7XG4gIH1cblxuICBfaW5pdCgpIHtcbiAgICB0aGlzLnBsYXllci5hZGRFdmVudExpc3RlbmVycyh0aGlzLmdhbWVDYW52YXMsIHRoaXMudGlsZXNNYXRyaXgpXG4gICAgdGhpcy5fYWRkQ29pblRvVGlsZXNNYXRyaXgodGhpcy50aWxlc01hdHJpeCk7XG4gIH1cblxuICBfbWFpbkxvb3AoKSB7XG4gICAgdGhpcy5fbW92ZUFsbCgpO1xuICAgIHRoaXMuX2RyYXdBbGwodGhpcy5nYW1lQ2FudmFzLCB0aGlzLnRpbGVzTWF0cml4KTtcbiAgfVxuXG4gIF9tb3ZlQWxsKCkge1xuICAgIHRoaXMuZW5lbWllcyA9IHRoaXMuZW5lbWllcy5maWx0ZXIoZW5lbXkgPT4gIWVuZW15LmRlbGV0ZUZsYWcpO1xuICAgIHRoaXMucGxheWVyLmJ1bGxldHMgPSB0aGlzLnBsYXllci5idWxsZXRzLmZpbHRlcihidWxsZXQgPT4gIWJ1bGxldC5kZWxldGVGbGFnKTtcbiAgXG4gICAgdGhpcy5wbGF5ZXIudXBkYXRlUG9zaXRpb24odGhpcy50aWxlc01hdHJpeCk7XG4gICAgaWYodGhpcy5wbGF5ZXIudG91Y2hpbmdBQ29pbiAhPT0gLTEpIHtcbiAgICAgIHRoaXMuX2FkZENvaW5Ub1RpbGVzTWF0cml4KHRoaXMudGlsZXNNYXRyaXgpO1xuICAgIH1cbiAgXG4gICAgdGhpcy5lbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xuICAgICAgZW5lbXkudXBkYXRlUG9zaXRpb24odGhpcy5wbGF5ZXIpO1xuICAgICAgZW5lbXkudHJ5VG9LaWxsUGxheWVyKHRoaXMucGxheWVyKTtcbiAgICB9KTtcbiAgXG4gICAgdGhpcy5wbGF5ZXIuYnVsbGV0cy5mb3JFYWNoKGJ1bGxldCA9PiB7XG4gICAgICBidWxsZXQudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgIGlmKGJ1bGxldC5pc091dE9mQm91bmRzKCkpIHtcbiAgICAgICAgYnVsbGV0LmRlbGV0ZUZsYWcgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5lbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xuICAgICAgICBpZiAoYnVsbGV0LmNvbGxpZGVkV2l0aEVuZW15KGVuZW15KSkge1xuICAgICAgICAgIGJ1bGxldC5kZWxldGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICBlbmVteS5kZWxldGVGbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIF9kcmF3QWxsKCkge1xuICAgIGRyYXdSZWN0KHsgY2FudmFzOiB0aGlzLmdhbWVDYW52YXMsIHg6IDAsIHk6IDAsIGhlaWdodDogQ0FOVkFTX0hFSUdIVCwgd2lkdGg6IENBTlZBU19XSURUSCwgY29sb3I6IEJBQ0tHUk9VTkRfQ09MT1IgfSk7XG4gICAgZHJhd1RpbGVzKHRoaXMuZ2FtZUNhbnZhcywgdGhpcy50aWxlc01hdHJpeCk7XG4gICAgdGhpcy5wbGF5ZXIuZHJhdyh0aGlzLmdhbWVDYW52YXMpO1xuICAgIHRoaXMuZW5lbWllcy5mb3JFYWNoKGVuZW15ID0+IGVuZW15LmRyYXcodGhpcy5nYW1lQ2FudmFzKSk7XG4gICAgdGhpcy5wbGF5ZXIuYnVsbGV0cy5mb3JFYWNoKGJ1bGxldCA9PiBidWxsZXQuZHJhdyh0aGlzLmdhbWVDYW52YXMpKTtcbiAgfVxuXG4gIF9hZGRDb2luVG9UaWxlc01hdHJpeCh0aWxlc01hdHJpeCkge1xuICAgIHRpbGVzTWF0cml4W2dldFJhbmRvbUludChOVU1CRVJfT0ZfUk9XUyAtIDEpXVtnZXRSYW5kb21JbnQoTlVNQkVSX09GX0NPTFVNTlMgLSAxKV0gPSBDT0lOXG4gIH1cbn0iLCJpbXBvcnQgeyBDQU5WQVNfSEVJR0hULCBDQU5WQVNfV0lEVEggfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgR2FtZSBmcm9tICcuL2dhbWUnO1xuXG53aW5kb3cub25sb2FkID0gKCk6IHZvaWQgPT4ge1xuICBjb25zdCBnYW1lID0gbmV3IEdhbWUoJ2dhbWVDYW52YXMnLCBDQU5WQVNfV0lEVEgsIENBTlZBU19IRUlHSFQpO1xuICBnYW1lLnBsYXkoKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9